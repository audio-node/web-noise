(self.webpackChunkweb_noise=self.webpackChunkweb_noise||[]).push([[179],{"./generated-stories-entry.js":function(module,__unused_webpack_exports,__webpack_require__){"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$")],module,!1)},"./src/stories/Basic.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultExample:function(){return DefaultExample},DemoExample:function(){return DemoExample},FilterExample:function(){return FilterExample},HackdaysDemo:function(){return HackdaysDemo},ParameterExample:function(){return ParameterExample},ReverbExample:function(){return ReverbExample},default:function(){return Basic_stories}});var _templateObject,objectSpread2=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),recoil=__webpack_require__("./node_modules/recoil/es/recoil.js"),setWires=function setWires(arr){var wires=[];return arr.forEach((function(el,index){var nextEl=arr[index+1];nextEl&&(console.log("".concat(el.id,"-").concat(nextEl.id)),wires.push({id:"".concat(el.id,"-").concat(nextEl.id),source:el.id,target:nextEl.id,type:"wire",targetHandle:"in",sourceHandle:"out"}))})),arr.concat(wires)},defaultExample=[{id:"oscillator",type:"oscillator",data:{label:"Oscillator"},position:{x:0,y:-50},className:"react-flow__node-default"},{id:"lfo",type:"oscillator",data:{label:"LFO"},position:{x:0,y:100},className:"react-flow__node-default"},{id:"gain",type:"gain",dragHandle:".dragHandle",data:{label:"Gain"},position:{x:340,y:25},className:"react-flow__node-default"},{id:"visualiser",type:"visualiser",data:{label:"Visualiser"},position:{x:680,y:250},className:"react-flow__node-default"},{id:"visualiser2",type:"visualiser",data:{label:"Visualiser 2"},position:{x:680,y:-30},className:"react-flow__node-default"},{id:"destination",type:"destination",data:{label:"Destination"},position:{x:1020,y:25},className:"react-flow__node-default"},{id:"whiteNoise",type:"whiteNoise",data:{label:"White Noise"},position:{x:340,y:-30},className:"react-flow__node-default"},{id:"osc-gain",source:"oscillator",target:"gain",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"lfo-gain",source:"lfo",target:"gain",type:"wire",targetHandle:"gain",sourceHandle:"out"},{id:"gain-to-vis",source:"gain",target:"visualiser",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"wn-to-vis",source:"whiteNoise",target:"visualiser2",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"vis-to-dest",source:"visualiser",target:"destination",type:"wire",targetHandle:"in",sourceHandle:"out"}],filterExample=setWires([{id:"oscillator",type:"oscillator",data:{label:"Oscillator"},position:{x:340,y:0},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"filter",type:"filter",data:{label:"Filter"},dragHandle:".leva-c-hwBXYF",position:{x:680,y:0},className:"react-flow__node-default"},{id:"gain",type:"gain",dragHandle:".leva-c-hwBXYF",data:{label:"Gain"},position:{x:1020,y:0},className:"react-flow__node-default"},{id:"visualiser2",type:"visualiser",data:{label:"Visualiser 2"},dragHandle:".leva-c-hwBXYF",position:{x:1020,y:0},className:"react-flow__node-default"},{id:"destination",type:"destination",data:{label:"Destination"},position:{x:1360,y:0},className:"react-flow__node-default"}]),demoExample=[{id:"oscillator",type:"oscillator",data:{label:"Oscillator"},position:{x:340,y:0},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"oscillator2",type:"oscillator",data:{label:"Oscillator 2"},position:{x:340,y:150},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"whiteNoise",type:"whiteNoise",data:{label:"White Noise"},position:{x:340,y:300},className:"react-flow__node-default"},{id:"monoSeq",type:"monoSequencer",data:{label:"Random Seq"},position:{x:0,y:0},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"gain",type:"gain",dragHandle:".leva-c-hwBXYF",data:{label:"Gain"},position:{x:680,y:100},className:"react-flow__node-default"},{id:"gain2",type:"gain",dragHandle:".leva-c-hwBXYF",data:{label:"Gain 2"},position:{x:680,y:300},className:"react-flow__node-default"},{id:"filter",type:"filter",data:{label:"Filter"},dragHandle:".leva-c-hwBXYF",position:{x:680,y:300},className:"react-flow__node-default"},{id:"visualiser",type:"visualiser",data:{label:"Visualiser"},position:{x:1020,y:100},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"spectroscope",type:"spectroscope",data:{label:"Spectroscope"},position:{x:1020,y:350},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"destination",type:"destination",data:{label:"Destination"},position:{x:1360,y:100},className:"react-flow__node-default"},{id:"osc-freq-to-osc",source:"monoSeq",target:"oscillator",type:"wire",sourceHandle:"out",targetHandle:"frequency"},{id:"osc-gain",source:"oscillator",target:"gain",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"ev-param-to-gain-gain",source:"gainGain",target:"gain",type:"wire",sourceHandle:"out",targetHandle:"gain"},{id:"gain-to-vis",source:"gain",target:"visualiser",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"vis-to-dest",source:"visualiser",target:"destination",type:"wire",targetHandle:"in",sourceHandle:"out"}],parameterExample=[{id:"oscillator",type:"oscillator",data:{label:"Oscillator"},position:{x:340,y:50},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"monoSeq",type:"monoSequencer",data:{label:"Sequencer"},position:{x:0,y:0},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"oscillatorDetune",type:"parameter",dragHandle:".leva-c-hwBXYF",data:{label:"Oscillator Detune",min:0,max:200,step:1,value:0},position:{x:0,y:180},className:"react-flow__node-default"},{id:"gain",type:"gain",dragHandle:".leva-c-hwBXYF",data:{label:"Gain"},position:{x:680,y:100},className:"react-flow__node-default"},{id:"gainGain",type:"parameter",dragHandle:".leva-c-hwBXYF",data:{label:"Gain gain",min:0,max:1,step:.001},position:{x:340,y:240},className:"react-flow__node-default"},{id:"visualiser",type:"visualiser",data:{label:"Visualiser"},position:{x:1020,y:100},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"destination",type:"destination",data:{label:"Destination"},position:{x:1360,y:100},className:"react-flow__node-default"},{id:"osc-freq-to-osc",source:"monoSeq",target:"oscillator",type:"wire",sourceHandle:"out",targetHandle:"frequency"},{id:"osc-detune-to-osc",source:"oscillatorDetune",target:"oscillator",type:"wire",sourceHandle:"out",targetHandle:"detune"},{id:"osc-gain",source:"oscillator",target:"gain",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"gain-param-to-gain-gain",source:"gainGain",target:"gain",type:"wire",sourceHandle:"out",targetHandle:"gain"},{id:"gain-to-vis",source:"gain",target:"visualiser",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"vis-to-dest",source:"visualiser",target:"destination",type:"wire",targetHandle:"in",sourceHandle:"out"}],reverbExample=setWires([{id:"oscillator",type:"oscillator",data:{label:"Oscillator"},position:{x:0,y:0},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"filter",type:"filter",data:{label:"Filter"},dragHandle:".leva-c-hwBXYF",position:{x:340,y:0},className:"react-flow__node-default"},{id:"reverb",type:"reverb",data:{label:"Reverb"},dragHandle:".leva-c-hwBXYF",position:{x:680,y:0},className:"react-flow__node-default"},{id:"gain",type:"gain",dragHandle:".leva-c-hwBXYF",data:{label:"Gain"},position:{x:1020,y:0},className:"react-flow__node-default"},{id:"visualiser2",type:"visualiser",data:{label:"Visualiser 2"},dragHandle:".leva-c-hwBXYF",position:{x:1360,y:0},className:"react-flow__node-default"},{id:"destination",type:"destination",data:{label:"Destination"},position:{x:1700,y:0},className:"react-flow__node-default"}]),hackdaysDemo=[{id:"oscillator",type:"oscillator",data:{label:"Oscillator"},position:{x:340,y:0},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"oscillator2",type:"oscillator",data:{label:"Oscillator 2"},position:{x:340,y:150},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"whiteNoise",type:"whiteNoise",data:{label:"White Noise"},position:{x:340,y:300},className:"react-flow__node-default"},{id:"monoSeq",type:"monoSequencer",data:{label:"Random Seq"},position:{x:0,y:0},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"gain",type:"gain",dragHandle:".leva-c-hwBXYF",data:{label:"Gain"},position:{x:680,y:100},className:"react-flow__node-default"},{id:"filter",type:"filter",data:{label:"Filter"},dragHandle:".leva-c-hwBXYF",position:{x:680,y:300},className:"react-flow__node-default"},{id:"reverb",type:"reverb",data:{label:"Reverb"},dragHandle:".leva-c-hwBXYF",position:{x:680,y:0},className:"react-flow__node-default"},{id:"visualiser",type:"visualiser",data:{label:"Oscilloscope"},position:{x:1020,y:100},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"spectroscope",type:"spectroscope",data:{label:"Spectroscope"},position:{x:1020,y:350},className:"react-flow__node-default",dragHandle:".leva-c-hwBXYF"},{id:"destination",type:"destination",data:{label:"Destination"},position:{x:1360,y:100},className:"react-flow__node-default"},{id:"osc-freq-to-osc",source:"monoSeq",target:"oscillator",type:"wire",sourceHandle:"out",targetHandle:"frequency"},{id:"osc-gain",source:"oscillator",target:"gain",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"ev-param-to-gain-gain",source:"gainGain",target:"gain",type:"wire",sourceHandle:"out",targetHandle:"gain"},{id:"gain-to-vis",source:"gain",target:"visualiser",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"gain-to-spectroscope",source:"gain",target:"spectroscope",type:"wire",targetHandle:"in",sourceHandle:"out"},{id:"vis-to-dest",source:"visualiser",target:"destination",type:"wire",targetHandle:"in",sourceHandle:"out"}],slicedToArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),ReactFlow_esm=__webpack_require__("./node_modules/react-flow-renderer/dist/ReactFlow.esm.js"),taggedTemplateLiteral=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),emotion_css_esm=__webpack_require__("./node_modules/@emotion/css/dist/emotion-css.esm.js"),consts=__webpack_require__("./src/styles/consts.ts");(0,emotion_css_esm.hi)(_templateObject||(_templateObject=(0,taggedTemplateLiteral.Z)(['\n .react-flow__pane {\n  /* background: rgb(106 106 106); */\n  /* background: "white"; */\n  // background: #292d39;\n    background: ',";\n  }\n\n  .react-flow__background {\n    /* background: #efefef; */\n    stroke: white;\n  }\n\n  .react-flow__node-default {\n    background: #292d39;\n    color: white;\n    border: none;\n    /* background: transparent; */\n  }\n\n  .react-flow__node {\n    padding: 0;\n    width: 230px;\n  }\n\n  .react-flow__edge-path {\n    stroke:  ",";\n  }\n\n  .react-flow__node.selected {\n    border: 1px solid ",";\n    box-shadow: 0 0 0 0.5px #",";\n  }\n\n  .react-flow__node-default.selected, .react-flow__node-default.selected:hover {\n    box-shadow: 0 0 0 0.5px #",";\n  }\n\n  .react-flow__edge-path {\n    stroke: #898989\n  }\n\n  .react-flow__edge.selected .react-flow__edge-path {\n    stroke: #007bff;\n  }\n\n  /* .react-flow__minimap-mask {\n    fill: ","\n  }\n\n  .react-flow__minimap-node {\n    fill:","\n  } */\n\n"])),consts.K.elevation3,consts.K.accent2,consts.K.accent2,consts.K.accent2,consts.K.accent2,consts.K.elevation1,consts.K.accent2);var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),src_MultiHandlesNode=function MultiHandleNode(_ref){var data=_ref.data,isConnectable=_ref.isConnectable;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",position:ReactFlow_esm.Ly.Left,id:"a",style:{top:"auto",background:"#555"},isConnectable:isConnectable}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",position:ReactFlow_esm.Ly.Left,style:{background:"#555"},onConnect:function onConnect(params){return console.log("handle onConnect",params)},isConnectable:isConnectable,id:"d"}),(0,jsx_runtime.jsx)("p",{children:"text"}),(0,jsx_runtime.jsx)("input",{className:"nodrag",type:"number",defaultValue:"0",onChange:data.onChange}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"target",position:ReactFlow_esm.Ly.Right,id:"b",style:{top:"auto",background:"#555"},isConnectable:isConnectable}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"target",position:ReactFlow_esm.Ly.Right,id:"c",style:{top:10,background:"#555"},isConnectable:isConnectable})]})};try{MultiHandlesNode.displayName="MultiHandlesNode",MultiHandlesNode.__docgenInfo={description:"",displayName:"MultiHandlesNode",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/MultiHandlesNode.tsx#MultiHandlesNode"]={docgenInfo:MultiHandlesNode.__docgenInfo,name:"MultiHandlesNode",path:"src/MultiHandlesNode.tsx#MultiHandlesNode"})}catch(__react_docgen_typescript_loader_error){}var contextValue={audioContext:new AudioContext,module:{}};window.contextValue=contextValue;var EditorContext=(0,react.createContext)(contextValue),useEditorContext=function useModule(){return(0,react.useContext)(EditorContext)},leva_esm=__webpack_require__("./node_modules/leva/dist/leva.esm.js"),Oscillator=function Oscillator(_ref){var sourcePosition=_ref.sourcePosition,targetPosition=_ref.targetPosition,id=_ref.id,data=_ref.data,_useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,oscillatorNode=function useOscillator(audioContext){return(0,react.useMemo)((function(){var oscillator=audioContext.createOscillator();return{inputs:{frequency:{port:oscillator.frequency},detune:{port:oscillator.detune}},outputs:{out:{port:oscillator}},oscillator:oscillator}}),[audioContext])}(audioContext),store=(0,leva_esm.WQ)(),values=(0,leva_esm.M4)({frequency:{value:440,max:800,min:0,label:"freq"},type:{options:{sine:"sine",sawtooth:"sawtooth",triangle:"triangle",square:"square"}}},{store:store}),oscillator=oscillatorNode.oscillator;return(0,react.useEffect)((function(){oscillator.start(),module[id]=oscillatorNode}),[]),(0,react.useEffect)((function(){oscillator.frequency.setValueAtTime(values.frequency,audioContext.currentTime)}),[values.frequency]),(0,react.useEffect)((function(){oscillator.type=values.type,console.log(values.type)}),[values.type]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"target",position:targetPosition||ReactFlow_esm.Ly.Left,style:{top:10},id:"frequency"}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"target",position:targetPosition||ReactFlow_esm.Ly.Left,id:"detune"}),(0,jsx_runtime.jsx)(leva_esm.MT,{store:store,fill:!0,flat:!0,titleBar:{drag:!1,title:data.label}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",position:sourcePosition||ReactFlow_esm.Ly.Right,id:"out"})]})},components_Oscillator=Oscillator;try{Oscillator.displayName="Oscillator",Oscillator.__docgenInfo={description:"",displayName:"Oscillator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Oscillator.tsx#Oscillator"]={docgenInfo:Oscillator.__docgenInfo,name:"Oscillator",path:"src/components/Oscillator.tsx#Oscillator"})}catch(__react_docgen_typescript_loader_error){}var Destination=function Destination(_ref){var targetPosition=_ref.targetPosition,data=_ref.data,id=_ref.id,store=(0,leva_esm.WQ)();(0,leva_esm.M4)({destination:{value:"",editable:!1}},{store:store});var _useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,destinationNode=function useDestination(audioContext){return(0,react.useMemo)((function(){var destination=audioContext.destination;return{inputs:{in:{port:destination}},destination:destination}}),[])}(audioContext);return(0,react.useEffect)((function(){module[id]=destinationNode}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{oneLineLabels:!0,hideCopyButton:!0,collapsed:!0,store:store,fill:!0,flat:!0,titleBar:{drag:!1,title:data.label}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"target",position:targetPosition||ReactFlow_esm.Ly.Left,id:"in",onConnect:function onConnect(params){return console.log("handle onConnect",params)}})]})},components_Destination=Destination;try{Destination.displayName="Destination",Destination.__docgenInfo={description:"",displayName:"Destination",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Destination.tsx#Destination"]={docgenInfo:Destination.__docgenInfo,name:"Destination",path:"src/components/Destination.tsx#Destination"})}catch(__react_docgen_typescript_loader_error){}var styled_browser_esm=__webpack_require__("./node_modules/@emotion/styled/dist/styled.browser.esm.js"),useParameter=function useParameter(audioContext){return(0,react.useMemo)((function(){var constantSource=audioContext.createConstantSource();return{outputs:{out:{port:constantSource}},constantSource:constantSource}}),[audioContext])},Parameter=function Parameter(_ref){_ref.targetPosition;var sourcePosition=_ref.sourcePosition,data=_ref.data,id=_ref.id,store=(0,leva_esm.WQ)(),_useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,values=(0,leva_esm.M4)({value:{value:data.value||1,label:"value",min:data.min||0,max:data.max||1,step:data.step||.1}},{store:store}),parameterNode=useParameter(audioContext);return(0,react.useEffect)((function(){parameterNode.constantSource.start(),module[id]=parameterNode}),[]),(0,react.useEffect)((function(){parameterNode.constantSource.offset.value=values.value}),[values.value]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{store:store,fill:!0,flat:!0,titleBar:{drag:!1,title:data.label}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",id:"out",position:sourcePosition||ReactFlow_esm.Ly.Right})]})},components_Parameter=Parameter;try{useParameter.displayName="useParameter",useParameter.__docgenInfo={description:"",displayName:"useParameter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Parameter.tsx#useParameter"]={docgenInfo:useParameter.__docgenInfo,name:"useParameter",path:"src/components/Parameter.tsx#useParameter"})}catch(__react_docgen_typescript_loader_error){}try{Parameter.displayName="Parameter",Parameter.__docgenInfo={description:"",displayName:"Parameter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Parameter.tsx#Parameter"]={docgenInfo:Parameter.__docgenInfo,name:"Parameter",path:"src/components/Parameter.tsx#Parameter"})}catch(__react_docgen_typescript_loader_error){}var MonoSequencer_templateObject,_templateObject2,index_es=__webpack_require__("./node_modules/@tonaljs/tonal/dist/index.es.js"),GlobalClockState=(0,recoil.cn)({key:"globalClock",default:{isPlaying:!1,timeOutID:0}}),GlobalClockCounterState=(0,recoil.cn)({key:"globalClockCounter",default:0}),GlobalClockTempo=(0,recoil.cn)({key:"globalClockTempo",default:70}),MonoSequencer=function MonoSequencer(_ref){var sourcePosition=_ref.sourcePosition,data=_ref.data,id=_ref.id,_useRecoilState=(0,recoil.FV)(GlobalClockState),_useRecoilState2=(0,slicedToArray.Z)(_useRecoilState,2),globalClock=_useRecoilState2[0],setGlobalClock=_useRecoilState2[1],_useRecoilState3=(0,recoil.FV)(GlobalClockTempo),_useRecoilState4=(0,slicedToArray.Z)(_useRecoilState3,2),globalTempo=_useRecoilState4[0],setGlobalTempo=_useRecoilState4[1],startButton=(0,react.useRef)(null),_useRecoilState5=(0,recoil.FV)(GlobalClockCounterState),_useRecoilState6=(0,slicedToArray.Z)(_useRecoilState5,2),globalCounter=_useRecoilState6[0],setGlobalCounter=_useRecoilState6[1],_useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,parameterNode=useParameter(audioContext),freqRange=index_es.Ci.rangeOf("C major")("A2","A6").map((function(note){return index_es.jC.freq(note||"C2")})),store=(0,leva_esm.WQ)(),_useControls=(0,leva_esm.M4)((function(){return{bpm:{min:20,max:300,step:1,value:globalTempo}}}),{store:store}),_useControls2=(0,slicedToArray.Z)(_useControls,2),controls=_useControls2[0],futureTickTime=(_useControls2[1],audioContext.currentTime),counter=1,counterTimeValue=60/globalTempo/4;function scheduler(){if(futureTickTime<audioContext.currentTime+.1){setGlobalCounter(counter+=1),futureTickTime+=counterTimeValue;var randomIndex=Math.floor(Math.random()*freqRange.length),randomFreq=freqRange[randomIndex];parameterNode.constantSource.offset.value=randomFreq,counter>16&&setGlobalCounter(counter=1)}setGlobalClock((0,objectSpread2.Z)((0,objectSpread2.Z)({},globalClock),{timeOutID:window.setTimeout(scheduler,0)}))}return(0,react.useEffect)((function(){parameterNode.constantSource.start(),module[id]=parameterNode}),[]),(0,react.useEffect)((function(){startButton.current&&startButton.current.classList.add("pulsing")}),[globalCounter]),(0,react.useEffect)((function(){setGlobalTempo(controls.bpm)}),[controls.bpm]),(0,react.useEffect)((function(){globalClock.isPlaying?function start(){setGlobalCounter(1),futureTickTime=audioContext.currentTime,scheduler(),startButton.current.classList.add("pulsing")}():function stop(){window.clearTimeout(globalClock.timeOutID),setGlobalClock((0,objectSpread2.Z)((0,objectSpread2.Z)({},globalClock),{timeOutID:0}))}()}),[globalClock.isPlaying]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{store:store,titleBar:{drag:!1,title:data.label},fill:!0}),(0,jsx_runtime.jsx)(StartStopButton,{children:(0,jsx_runtime.jsx)("div",{className:"leva-c-bduird",children:(0,jsx_runtime.jsx)("button",{ref:startButton,onClick:function onClick(){return setGlobalClock((0,objectSpread2.Z)((0,objectSpread2.Z)({},globalClock),{isPlaying:!globalClock.isPlaying}))},className:"leva-c-ihqPFh",children:globalClock.isPlaying?"stop":"start"})})}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",id:"out",position:sourcePosition||ReactFlow_esm.Ly.Right})]})},pulse=(0,emotion_css_esm.F4)(MonoSequencer_templateObject||(MonoSequencer_templateObject=(0,taggedTemplateLiteral.Z)(["\n  0% { opacity: 0}\n  100% { opacity: 1}\n"]))),StartStopButton=styled_browser_esm.Z.div(_templateObject2||(_templateObject2=(0,taggedTemplateLiteral.Z)(["\n  button {\n    background: ",";\n    border: 0;\n\n    &.pulsing {\n      animation: "," 0.01s;\n    }\n\n    /* display: block;\n    outline: none;\n    font-size: inherit;\n    font-family: inherit;\n    border: none;\n    appearance: none;\n    font-weight: var(--leva-fontWeights-button);\n    height: var(--leva-sizes-rowHeight);\n    border-radius: var(--leva-radii-sm);\n    background-color: var(--leva-colors-elevation1);\n    color: var(--leva-colors-highlight1); */\n  }\n"])),consts.K.accent3,pulse),components_MonoSequencer=MonoSequencer;try{MonoSequencer.displayName="MonoSequencer",MonoSequencer.__docgenInfo={description:"",displayName:"MonoSequencer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MonoSequencer.tsx#MonoSequencer"]={docgenInfo:MonoSequencer.__docgenInfo,name:"MonoSequencer",path:"src/components/MonoSequencer.tsx#MonoSequencer"})}catch(__react_docgen_typescript_loader_error){}var Gain=function Gain(_ref){var targetPosition=_ref.targetPosition,sourcePosition=_ref.sourcePosition,data=_ref.data,id=_ref.id,_useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,clock=((0,react.useRef)(null),(0,recoil.sJ)(GlobalClockCounterState)),gainNode=function useGain(audioContext){return(0,react.useMemo)((function(){var gain=audioContext.createGain();return{inputs:{in:{port:gain},gain:{port:gain.gain}},outputs:{out:{port:gain}},gain:gain}}),[audioContext])}(audioContext),levaStore=(0,leva_esm.WQ)(),controls=(0,leva_esm.M4)({gain:{value:0,min:0,max:1,label:"lvl"},env:(0,leva_esm.so)({t:!1,attack:{value:0,min:0,max:.4,step:.001,label:"A"},decay:{value:.07,max:.5,min:0,step:.001,label:"D"},sustain:{value:.38,min:0,max:10,step:.001,label:"S"}},{collapsed:!0,color:consts.l})},{store:levaStore});return(0,react.useEffect)((function(){console.log("gain rendered",id),module[id]=gainNode}),[]),(0,react.useEffect)((function(){controls.t&&(gainNode.gain.gain.cancelScheduledValues(audioContext.currentTime),gainNode.gain.gain.setValueAtTime(0,audioContext.currentTime),gainNode.gain.gain.linearRampToValueAtTime(1,audioContext.currentTime+controls.attack),gainNode.gain.gain.linearRampToValueAtTime(0,audioContext.currentTime+controls.decay+controls.sustain))}),[clock]),(0,react.useEffect)((function(){gainNode.gain.gain.setValueAtTime(controls.gain,audioContext.currentTime)}),[controls.gain]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{store:levaStore,fill:!0,flat:!0,titleBar:{drag:!1,title:data.label}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"target",position:targetPosition||ReactFlow_esm.Ly.Left,style:{top:10},id:"in"}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"target",position:targetPosition||ReactFlow_esm.Ly.Left,id:"gain"}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",id:"out",position:sourcePosition||ReactFlow_esm.Ly.Right})]})},components_Gain=Gain;try{Gain.displayName="Gain",Gain.__docgenInfo={description:"",displayName:"Gain",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Gain.tsx#Gain"]={docgenInfo:Gain.__docgenInfo,name:"Gain",path:"src/components/Gain.tsx#Gain"})}catch(__react_docgen_typescript_loader_error){}var objectWithoutProperties=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_excluded=["id","sourceX","sourceY","targetX","targetY","sourcePosition","targetPosition","style","data","arrowHeadType","markerEndId","source","target","sourceHandleId","targetHandleId"],Wire=function Wire(_ref){var id=_ref.id,sourceX=_ref.sourceX,sourceY=_ref.sourceY,targetX=_ref.targetX,targetY=_ref.targetY,sourcePosition=_ref.sourcePosition,targetPosition=_ref.targetPosition,_ref$style=_ref.style,style=void 0===_ref$style?{}:_ref$style,arrowHeadType=(_ref.data,_ref.arrowHeadType),markerEndId=_ref.markerEndId,source=_ref.source,target=_ref.target,sourceHandleId=_ref.sourceHandleId,targetHandleId=_ref.targetHandleId,module=((0,objectWithoutProperties.Z)(_ref,_excluded),useModule().module);(0,react.useEffect)((function(){var _module$source,_module$source$output,_module$source$output2,_module$target,_module$target$inputs,_module$target$inputs2;if(console.log("connected ".concat(source," to ").concat(target)),sourceHandleId&&targetHandleId){var outputNode=null===(_module$source=module[source])||void 0===_module$source||null===(_module$source$output=_module$source.outputs)||void 0===_module$source$output||null===(_module$source$output2=_module$source$output[sourceHandleId])||void 0===_module$source$output2?void 0:_module$source$output2.port,inputNode=null===(_module$target=module[target])||void 0===_module$target||null===(_module$target$inputs=_module$target.inputs)||void 0===_module$target$inputs||null===(_module$target$inputs2=_module$target$inputs[targetHandleId])||void 0===_module$target$inputs2?void 0:_module$target$inputs2.port;if(outputNode&&inputNode)return outputNode.connect(inputNode),function(){console.log("disconnected ".concat(source," to ").concat(target)),outputNode.disconnect(inputNode)}}}),[source,target]);var edgePath=(0,ReactFlow_esm.OQ)({targetX:targetX,targetY:targetY,targetPosition:targetPosition,sourceX:sourceX,sourceY:sourceY,sourcePosition:sourcePosition}),markerEnd=(0,ReactFlow_esm.cf)(arrowHeadType,markerEndId),_getEdgeCenter=(0,ReactFlow_esm.Pp)({targetX:targetX,targetY:targetY,sourceX:sourceX,sourceY:sourceY}),_getEdgeCenter2=(0,slicedToArray.Z)(_getEdgeCenter,2);_getEdgeCenter2[0],_getEdgeCenter2[1];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("path",{id:id,style:style,className:"react-flow__edge-path Wire",d:edgePath,markerEnd:markerEnd}),(0,jsx_runtime.jsx)("path",{style:(0,objectSpread2.Z)((0,objectSpread2.Z)({},style),{},{strokeWidth:8,color:"transparent",opacity:0,cursor:"pointer"}),d:edgePath,markerEnd:markerEnd})]})},components_Wire=Wire;try{Wire.displayName="Wire",Wire.__docgenInfo={description:"",displayName:"Wire",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Wire.tsx#Wire"]={docgenInfo:Wire.__docgenInfo,name:"Wire",path:"src/components/Wire.tsx#Wire"})}catch(__react_docgen_typescript_loader_error){}var index_min=__webpack_require__("./node_modules/use-animation-frame/index.min.js"),index_min_default=__webpack_require__.n(index_min),useAnalyser=function useAnalyser(audioContext){return(0,react.useMemo)((function(){var analyser=audioContext.createAnalyser();return{inputs:{in:{port:analyser}},outputs:{out:{port:analyser}},analyser:analyser}}),[audioContext])},Visualizer=function Visualizer(_ref){var targetPosition=_ref.targetPosition,sourcePosition=_ref.sourcePosition,data=_ref.data,id=_ref.id,_useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,analyserNode=useAnalyser(audioContext),analyser=analyserNode.analyser,canvasRef=(0,react.useRef)(null),canvas=canvasRef.current,bufferLength=analyser.frequencyBinCount,dataArray=new Uint8Array(bufferLength),levaStore=(0,leva_esm.WQ)(),controls=(0,leva_esm.M4)({color:{value:consts.l}},{store:levaStore});(0,react.useEffect)((function(){console.log("visualiser rendered",id),module[id]=analyserNode}),[]);var canvasCtx=(0,react.useMemo)((function(){return null==canvas?void 0:canvas.getContext("2d")}),[canvas]),draw=(0,react.useCallback)((function(){if(canvas&&canvasCtx){analyser.getByteTimeDomainData(dataArray),canvasCtx.fillStyle="#292d39",canvasCtx.fillRect(0,0,canvas.width,canvas.height),canvasCtx.lineWidth=2,canvasCtx.strokeStyle=controls.color,canvasCtx.beginPath();for(var sliceWidth=1*canvas.width/bufferLength,x=0,i=0;i<bufferLength;i++){var y=dataArray[i]/128*canvas.height/2;0===i?canvasCtx.moveTo(x,y):canvasCtx.lineTo(x,y),x+=sliceWidth}canvasCtx.lineTo(canvas.width,canvas.height/2),canvasCtx.stroke()}}),[canvas,controls.color]),tick=(0,react.useCallback)(draw,[draw]);return index_min_default()(tick),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{store:levaStore,titleBar:{drag:!1,title:data.label},fill:!0}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{id:"in",type:"target",position:targetPosition||ReactFlow_esm.Ly.Left})}),(0,jsx_runtime.jsx)("canvas",{ref:canvasRef,style:{display:"block",width:"100%"}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{id:"out",type:"source",position:sourcePosition||ReactFlow_esm.Ly.Right})]})},components_Visualizer=Visualizer;try{useAnalyser.displayName="useAnalyser",useAnalyser.__docgenInfo={description:"",displayName:"useAnalyser",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Visualizer.tsx#useAnalyser"]={docgenInfo:useAnalyser.__docgenInfo,name:"useAnalyser",path:"src/components/Visualizer.tsx#useAnalyser"})}catch(__react_docgen_typescript_loader_error){}try{Visualizer.displayName="Visualizer",Visualizer.__docgenInfo={description:"",displayName:"Visualizer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Visualizer.tsx#Visualizer"]={docgenInfo:Visualizer.__docgenInfo,name:"Visualizer",path:"src/components/Visualizer.tsx#Visualizer"})}catch(__react_docgen_typescript_loader_error){}var Spectroscope=function Spectroscope(_ref){var targetPosition=_ref.targetPosition,sourcePosition=_ref.sourcePosition,data=_ref.data,id=_ref.id,_useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,analyserNode=useAnalyser(audioContext),analyser=analyserNode.analyser,canvasRef=(0,react.useRef)(null),canvas=canvasRef.current,bufferLength=analyser.frequencyBinCount,dataArray=new Uint8Array(bufferLength),levaStore=(0,leva_esm.WQ)(),controls=(0,leva_esm.M4)({color:{value:consts.l}},{store:levaStore});(0,react.useEffect)((function(){console.log("visualiser rendered",id),module[id]=analyserNode}),[]);var canvasCtx=(0,react.useMemo)((function(){return null==canvas?void 0:canvas.getContext("2d")}),[canvas]),draw=(0,react.useCallback)((function(){if(canvas&&canvasCtx){analyser.getByteFrequencyData(dataArray),canvasCtx.fillStyle="#292d39",canvasCtx.fillRect(0,0,canvas.width,canvas.height),console.log(canvas.width,canvas.height);for(var barHeight,barWidth=canvas.width/bufferLength*2.5,x=0,i=0;i<bufferLength;i++)barHeight=dataArray[i]/2,canvasCtx.fillStyle=controls.color,canvasCtx.fillRect(x,canvas.height-barHeight/2,barWidth,barHeight),x+=barWidth+1}}),[canvas,controls.color]),tick=(0,react.useCallback)(draw,[draw]);return index_min_default()(tick),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{store:levaStore,titleBar:{drag:!1,title:data.label},fill:!0}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{id:"in",type:"target",position:targetPosition||ReactFlow_esm.Ly.Left})}),(0,jsx_runtime.jsx)("canvas",{ref:canvasRef,style:{display:"block",width:"100%"}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{id:"out",type:"source",position:sourcePosition||ReactFlow_esm.Ly.Right})]})},components_Spectroscope=Spectroscope;try{Spectroscope.displayName="Spectroscope",Spectroscope.__docgenInfo={description:"",displayName:"Spectroscope",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Spectroscope.tsx#Spectroscope"]={docgenInfo:Spectroscope.__docgenInfo,name:"Spectroscope",path:"src/components/Spectroscope.tsx#Spectroscope"})}catch(__react_docgen_typescript_loader_error){}var asyncToGenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),worklet=__webpack_require__("./node_modules/worklet-loader/dist/cjs.js!./src/components/WhiteNoise/worklet.ts"),worklet_default=__webpack_require__.n(worklet),loadModule=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(audioContext){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,audioContext.audioWorklet.addModule(worklet_default());case 3:return _context.abrupt("return",!0);case 6:return _context.prev=6,_context.t0=_context.catch(0),console.log(_context.t0),_context.abrupt("return",!1);case 10:case"end":return _context.stop()}}),_callee,null,[[0,6]])})));return function loadModule(_x){return _ref.apply(this,arguments)}}(),WhiteNoise=function WhiteNoise(_ref3){_ref3.targetPosition;var sourcePosition=_ref3.sourcePosition,data=_ref3.data,id=_ref3.id,_useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,whiteNoiseNode=function useWhiteNoise(audioContext){var _useState=(0,react.useState)(),_useState2=(0,slicedToArray.Z)(_useState,2),node=_useState2[0],setNode=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),ready=_useState4[0],setReady=_useState4[1],_useMemo=(0,react.useMemo)((function(){var innerPort=audioContext.createMediaStreamDestination();return[innerPort,audioContext.createMediaStreamSource(innerPort.stream)]}),[audioContext]),_useMemo2=(0,slicedToArray.Z)(_useMemo,2),innerPort=_useMemo2[0],port=_useMemo2[1];return(0,react.useEffect)((function(){(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){var whiteNoise;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,loadModule(audioContext);case 2:(whiteNoise=new AudioWorkletNode(audioContext,"white-noise-processor")).connect(innerPort),setNode(whiteNoise),setReady(!0);case 6:case"end":return _context2.stop()}}),_callee2)})))()}),[audioContext]),{outputs:{out:{port:port}},whiteNoise:node,ready:ready}}(audioContext),ready=whiteNoiseNode.ready,store=(0,leva_esm.WQ)();return(0,leva_esm.M4)({whiteNoise:{value:"",editable:!1}},{store:store}),(0,react.useEffect)((function(){module[id]=whiteNoiseNode}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{oneLineLabels:!0,hideCopyButton:!0,collapsed:!0,store:store,fill:!0,flat:!0,titleBar:{drag:!1,title:data.label}}),ready?null:(0,jsx_runtime.jsx)("div",{children:"loading"}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",id:"out",position:sourcePosition||ReactFlow_esm.Ly.Right})]})},components_WhiteNoise=WhiteNoise;try{loadModule.displayName="loadModule",loadModule.__docgenInfo={description:"",displayName:"loadModule",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/WhiteNoise/index.tsx#loadModule"]={docgenInfo:loadModule.__docgenInfo,name:"loadModule",path:"src/components/WhiteNoise/index.tsx#loadModule"})}catch(__react_docgen_typescript_loader_error){}try{WhiteNoise.displayName="WhiteNoise",WhiteNoise.__docgenInfo={description:"",displayName:"WhiteNoise",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/WhiteNoise/index.tsx#WhiteNoise"]={docgenInfo:WhiteNoise.__docgenInfo,name:"WhiteNoise",path:"src/components/WhiteNoise/index.tsx#WhiteNoise"})}catch(__react_docgen_typescript_loader_error){}var FilterTypes={lowpass:"lowpass",allpass:"allpass",bandpass:"bandpass",highpass:"highpass",highshelf:"highshelf",lowshelf:"lowshelf",notch:"notch",peaking:"peaking"},Filter=function Filter(_ref){var sourcePosition=_ref.sourcePosition,targetPosition=_ref.targetPosition,data=_ref.data,id=_ref.id,_useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,filterNode=function useFilter(audioContext){return(0,react.useMemo)((function(){var filter=audioContext.createBiquadFilter();return{inputs:{in:{port:filter}},outputs:{out:{port:filter}},filter:filter}}),[])}(audioContext),filter=filterNode.filter,store=(0,leva_esm.WQ)(),_filter$frequency=filter.frequency,frequencyMaxValue=(_filter$frequency.minValue,_filter$frequency.maxValue),controls=(0,leva_esm.M4)({frequency:{value:frequencyMaxValue/2,max:frequencyMaxValue,min:0,label:"freq",step:1e-6},q:{value:0,max:20,min:0,label:"q"},type:{options:FilterTypes}},{store:store});return(0,react.useEffect)((function(){filter.frequency.setValueAtTime(controls.frequency,audioContext.currentTime)}),[controls.frequency]),(0,react.useEffect)((function(){filter.Q.setValueAtTime(controls.q,audioContext.currentTime)}),[controls.q]),(0,react.useEffect)((function(){filter.type=controls.type}),[controls.type]),(0,react.useEffect)((function(){console.log("filter rendered",id),module[id]=filterNode,filter.gain.setValueAtTime(10,audioContext.currentTime)}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{store:store,fill:!0,flat:!0,titleBar:{drag:!1,title:data.label}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"target",position:targetPosition||ReactFlow_esm.Ly.Left,id:"in",onConnect:function onConnect(params){return console.log("handle onConnect",params)}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",position:sourcePosition||ReactFlow_esm.Ly.Right,id:"out",onConnect:function onConnect(params){return console.log("handle onConnect",params)}})]})},components_Filter=Filter;try{Filter.displayName="Filter",Filter.__docgenInfo={description:"",displayName:"Filter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Filter.tsx#Filter"]={docgenInfo:Filter.__docgenInfo,name:"Filter",path:"src/components/Filter.tsx#Filter"})}catch(__react_docgen_typescript_loader_error){}var components_Envelope=function Envelope(_ref){var id=_ref.id,data=_ref.data,sourcePosition=_ref.sourcePosition,_useEditorContext=(_ref.targetPosition,useModule()),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,parameterNode=useParameter(audioContext),store=(0,leva_esm.WQ)();(0,react.useEffect)((function(){parameterNode.constantSource.start(),module[id]=parameterNode}),[]);(0,leva_esm.M4)({attack:{value:.5,max:1,min:0,label:"A"},decay:{value:.5,max:1,min:0,label:"D"},sustain:{value:.5,max:1,min:0,label:"S"},release:{value:.5,max:1,min:0,label:"R"}},{store:store});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{store:store,fill:!0,flat:!0,titleBar:{drag:!1,title:data.label}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",position:sourcePosition||ReactFlow_esm.Ly.Right,id:"out",onConnect:function onConnect(params){return console.log("handle onConnect",params)}})]})},ResumeContext=function ResumeContext(){var audioContext=useModule().audioContext,_useState=(0,react.useState)("running"===audioContext.state),_useState2=(0,slicedToArray.Z)(_useState,2),isContextResumed=_useState2[0],setIsContextResumed=_useState2[1];return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:isContextResumed?(0,jsx_runtime.jsx)(ReactFlow_esm.Bw,{onClick:function onClick(){audioContext.suspend(),setIsContextResumed(!1)},children:(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,jsx_runtime.jsx)("path",{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"})})}):(0,jsx_runtime.jsx)(ReactFlow_esm.Bw,{onClick:function onClick(){audioContext.resume(),setIsContextResumed(!0)},children:(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512",children:(0,jsx_runtime.jsx)("path",{d:"M215 71l-89 89H24a24 24 0 0 0-24 24v144a24 24 0 0 0 24 24h102.06L215 441c15 15 41 4.47 41-17V88c0-21.47-26-32-41-17z"})})})})},components_ResumeContext=ResumeContext;try{ResumeContext.displayName="ResumeContext",ResumeContext.__docgenInfo={description:"",displayName:"ResumeContext",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ResumeContext.tsx#ResumeContext"]={docgenInfo:ResumeContext.__docgenInfo,name:"ResumeContext",path:"src/components/ResumeContext.tsx#ResumeContext"})}catch(__react_docgen_typescript_loader_error){}var Reverb_useReverb=function useReverb(audioContext,buffer){var reverb=(0,react.useMemo)((function(){var convolver=audioContext.createConvolver(),wet=audioContext.createGain(),dry=audioContext.createGain(),inNode=audioContext.createGain(),outNode=audioContext.createGain();return inNode.connect(dry),inNode.connect(convolver),convolver.connect(wet),dry.connect(outNode),wet.connect(outNode),{convolver:convolver,wetGain:wet,dryGain:dry,inputs:{in:{port:inNode}},outputs:{out:{port:outNode}}}}),[audioContext]);return(0,react.useEffect)((function(){reverb.convolver.buffer=null!=buffer?buffer:null}),[reverb,buffer]),reverb},impulse=__webpack_require__("./src/components/Reverb/impulse.wav"),components_Reverb=function Reverb(_ref){var id=_ref.id,data=_ref.data,sourcePosition=_ref.sourcePosition,targetPosition=_ref.targetPosition,_useEditorContext=useModule(),audioContext=_useEditorContext.audioContext,module=_useEditorContext.module,_useState=(0,react.useState)(),_useState2=(0,slicedToArray.Z)(_useState,2),impulseBuffer=_useState2[0],setImpulseBuffer=_useState2[1],reverb=Reverb_useReverb(audioContext,impulseBuffer),store=(0,leva_esm.WQ)();(0,react.useEffect)((function(){loadImpulse(audioContext).then(setImpulseBuffer)}),[audioContext]);var controls=(0,leva_esm.M4)({wetDry:{value:.5,max:1,min:0,label:"wet/dry"}},{store:store});return(0,react.useEffect)((function(){if(reverb)return module[id]=reverb,reverb.dryGain.gain.setValueAtTime(.5,audioContext.currentTime),reverb.wetGain.gain.setValueAtTime(.5,audioContext.currentTime),function(){delete module[id]}}),[reverb,id,module,audioContext]),(0,react.useEffect)((function(){reverb.wetGain.gain.setValueAtTime(controls.wetDry,audioContext.currentTime),reverb.dryGain.gain.setValueAtTime(1-controls.wetDry,audioContext.currentTime)}),[controls.wetDry,reverb,audioContext]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(leva_esm.MT,{store:store,fill:!0,flat:!0,titleBar:{drag:!1,title:data.label}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"target",position:targetPosition||ReactFlow_esm.Ly.Left,id:"in",onConnect:function onConnect(params){return console.log("handle onConnect",params)}}),(0,jsx_runtime.jsx)(ReactFlow_esm.HH,{type:"source",position:sourcePosition||ReactFlow_esm.Ly.Right,id:"out",onConnect:function onConnect(params){return console.log("handle onConnect",params)}})]})},loadImpulse=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(audioContext){var response,buffer;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,fetch(impulse);case 2:return response=_context.sent,_context.next=5,response.arrayBuffer();case 5:return buffer=_context.sent,_context.abrupt("return",audioContext.decodeAudioData(buffer));case 7:case"end":return _context.stop()}}),_callee)})));return function loadImpulse(_x){return _ref2.apply(this,arguments)}}(),nodeTypes={multiHandlesNode:src_MultiHandlesNode,oscillator:components_Oscillator,gain:components_Gain,visualiser:components_Visualizer,spectroscope:components_Spectroscope,destination:components_Destination,whiteNoise:components_WhiteNoise,filter:components_Filter,parameter:components_Parameter,reverb:components_Reverb,monoSequencer:components_MonoSequencer,envelope:components_Envelope},edgeTypes={wire:components_Wire},onNodeDragStop=function onNodeDragStop(_event,node){return console.log("drag stop",node)},onElementClick=function onElementClick(_event,element){return console.log("click",element)},snapGrid=[20,20],Editor=function Editor(_ref){var elements=_ref.elements,_useState=(0,react.useState)(null),_useState2=(0,slicedToArray.Z)(_useState,2),reactflowInstance=_useState2[0],setReactflowInstance=_useState2[1],_useState3=(0,react.useState)(elements||defaultExample),_useState4=(0,slicedToArray.Z)(_useState3,2),initialElements=_useState4[0],setElements=_useState4[1];(0,react.useEffect)((function(){setElements(initialElements)}),[initialElements]),(0,react.useEffect)((function(){reactflowInstance&&initialElements.length>0&&reactflowInstance.fitView()}),[reactflowInstance,initialElements.length]);var onElementsRemove=(0,react.useCallback)((function(elementsToRemove){return setElements((function(els){return(0,ReactFlow_esm.d0)(elementsToRemove,els)}))}),[]),onConnect=(0,react.useCallback)((function(params){setElements((function(els){return(0,ReactFlow_esm.Z_)((0,objectSpread2.Z)((0,objectSpread2.Z)({},params),{},{type:"wire"}),els)}))}),[]),onLoad=(0,react.useCallback)((function(rfi){reactflowInstance||(setReactflowInstance(rfi),console.log("flow loaded:",rfi))}),[reactflowInstance]);return(0,jsx_runtime.jsx)(EditorContext.Provider,{value:contextValue,children:(0,jsx_runtime.jsxs)(ReactFlow_esm.ZP,{elements:initialElements,onElementClick:onElementClick,onElementsRemove:onElementsRemove,onConnect:onConnect,onNodeDragStop:onNodeDragStop,onLoad:onLoad,nodeTypes:nodeTypes,edgeTypes:edgeTypes,snapToGrid:!0,snapGrid:snapGrid,defaultZoom:1.5,children:[(0,jsx_runtime.jsx)(ReactFlow_esm.Aq,{variant:ReactFlow_esm.T7.Dots,gap:12}),(0,jsx_runtime.jsx)(ReactFlow_esm.a9,{}),(0,jsx_runtime.jsx)(ReactFlow_esm.ZX,{children:(0,jsx_runtime.jsx)(components_ResumeContext,{})})]})})},src_Editor=Editor;try{Editor.displayName="Editor",Editor.__docgenInfo={description:"",displayName:"Editor",props:{elements:{defaultValue:null,description:"",name:"elements",required:!1,type:{name:"Elements<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Editor.tsx#Editor"]={docgenInfo:Editor.__docgenInfo,name:"Editor",path:"src/Editor.tsx#Editor"})}catch(__react_docgen_typescript_loader_error){}var Basic_stories={title:"Basic",component:src_Editor,decorators:[function(Story){return(0,jsx_runtime.jsx)(recoil.Wh,{children:(0,jsx_runtime.jsx)("div",{style:{height:"100vh"},children:(0,jsx_runtime.jsx)(Story,{})})})}]},DefaultExample=function DefaultExample(){return(0,jsx_runtime.jsx)(src_Editor,{elements:defaultExample})},FilterExample=function FilterExample(){return(0,jsx_runtime.jsx)(src_Editor,{elements:filterExample})},ParameterExample=function ParameterExample(){return(0,jsx_runtime.jsx)("div",{style:{height:"100vh"},children:(0,jsx_runtime.jsx)(src_Editor,{elements:parameterExample})})},ReverbExample=function ReverbExample(){return(0,jsx_runtime.jsx)(src_Editor,{elements:reverbExample})},DemoExample=function DemoExample(){return(0,jsx_runtime.jsx)(src_Editor,{elements:demoExample})},HackdaysDemo=function HackdaysDemo(){return(0,jsx_runtime.jsx)(src_Editor,{elements:hackdaysDemo})};DefaultExample.parameters=(0,objectSpread2.Z)({storySource:{source:"() => <Editor elements={defaultExample} />"}},DefaultExample.parameters),FilterExample.parameters=(0,objectSpread2.Z)({storySource:{source:"() => <Editor elements={filterExample} />"}},FilterExample.parameters),ParameterExample.parameters=(0,objectSpread2.Z)({storySource:{source:'() => (\n  <div style={{ height: "100vh" }}>\n    <Editor elements={parameterExample} />\n  </div>\n)'}},ParameterExample.parameters),ReverbExample.parameters=(0,objectSpread2.Z)({storySource:{source:"() => <Editor elements={reverbExample} />"}},ReverbExample.parameters),DemoExample.parameters=(0,objectSpread2.Z)({storySource:{source:"() => <Editor elements={demoExample} />"}},DemoExample.parameters),HackdaysDemo.parameters=(0,objectSpread2.Z)({storySource:{source:"() => <Editor elements={hackdaysDemo} />"}},HackdaysDemo.parameters)},"./.storybook/preview.js-generated-config-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{parameters:function(){return parameters}});var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),esm=__webpack_require__("./node_modules/@storybook/client-logger/dist/esm/index.js"),objectSpread2=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),create=__webpack_require__("./node_modules/@storybook/theming/dist/esm/create.js"),consts=__webpack_require__("./src/styles/consts.ts"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},layout:"fullscreen",darkMode:{dark:(0,objectSpread2.Z)((0,objectSpread2.Z)({},create.n.dark),{},{appBg:consts.K.elevation1}),light:(0,objectSpread2.Z)((0,objectSpread2.Z)({},create.n.normal),{},{appBg:"white"}),current:"dark"}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.kg.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./src/styles/consts.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{l:function(){return LEVA_COLOR_ACCENT2_BLUE},K:function(){return LEVA_COLORS}});var LEVA_COLOR_ACCENT2_BLUE="#007bff",LEVA_COLORS={elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00"}},"./node_modules/worklet-loader/dist/cjs.js!./src/components/WhiteNoise/worklet.ts":function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"a5393cd67b597efa9b58.worklet.js"},"./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$":function(module,__unused_webpack_exports,__webpack_require__){var map={"./stories/Basic.stories.tsx":"./src/stories/Basic.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$"},"./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$":function(module){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$",module.exports=webpackEmptyContext},"./storybook-init-framework-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"./src/components/Reverb/impulse.wav":function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__.p+"0ec4d987682248a65978.wav"},"?4f7e":function(){}},function(__webpack_require__){var __webpack_exec__=function(moduleId){return __webpack_require__(__webpack_require__.s=moduleId)};__webpack_require__.O(0,[840],(function(){return __webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/dist/esm/frameworks/react/config.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-interactions/dist/esm/preset/argsEnhancers.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.js")}));__webpack_require__.O()}]);