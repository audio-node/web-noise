!function(e,t,r,n,o){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof s[n]&&s[n],l=i.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(t,r){if(!l[t]){if(!e[t]){var o="function"==typeof s[n]&&s[n];if(!r&&o)return o(t,!0);if(i)return i(t,!0);if(a&&"string"==typeof t)return a(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},p.cache={};var f=l[t]=new u.Module(t);e[t][0].call(f.exports,p,f,f.exports,this)}return l[t].exports;function p(e){var t=p.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=l,u.parent=i,u.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return s[n]}}),s[n]=u;for(var c=0;c<t.length;c++)u(t[c]);if(r){var f=u(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof define&&define.amd&&define(function(){return f})}}({"3qWXy":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"DistortionProcessor",()=>i);var o=e("../lib/useBroadcast"),s=e("./waveGenerators");class i extends AudioWorkletProcessor{broadcast=(0,o.useBroadcast)(this.port);_currentDrive=null;_currentType=null;static get parameterDescriptors(){return[{name:"type",minValue:0,maxValue:s.generators.length-1}]}constructor(){super(),this.port.start()}onChange(){let e=s.generators[this._currentType??0];if(!e){console.error("could not find generator with index ",this._currentType);return}let t=e(this._currentDrive??0);this.broadcast(t)}process(e,t,r){let n=e?.[0]?.[0];if(!n?.length)return this._currentDrive=0,this.onChange(),!0;let o=r.type[0];return o!==this._currentType&&(this._currentType=o,this.onChange()),n.forEach(e=>{e!==this._currentDrive&&(this._currentDrive=e,this.onChange())}),!0}}registerProcessor("distortion-processor",i)},{"../lib/useBroadcast":"eLhYv","./waveGenerators":"aQfCi","@parcel/transformer-js/src/esmodule-helpers.js":"5zHCx"}],eLhYv:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"useBroadcast",()=>s),n.export(r,"addBroadcastListener",()=>i),n.export(r,"removeBroadcastListener",()=>l);let o="default",s=e=>{let t={[o]:[]};return e.addEventListener("message",({data:e})=>{if("ADD_LISTENER"===e.name){let r=e.poolName??o;t[r]||(t[r]=[]),t[r].push(e.port)}}),(e,r=o)=>t[r]?.forEach(t=>t.postMessage(e))},i=(e,t,r)=>{e.postMessage({name:"ADD_LISTENER",port:t,poolName:r},[t])},l=(e,t,r)=>{e.postMessage({name:"REMOVE_LISTENER",port:t,poolName:r},[t])}},{"@parcel/transformer-js/src/esmodule-helpers.js":"5zHCx"}],"5zHCx":[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],aQfCi:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"generateClipperWave",()=>l),n.export(r,"generateAnalogWarmWave",()=>a),n.export(r,"generateFuzzWave",()=>u),n.export(r,"generators",()=>c);var o=e("../lib/generateWave"),s=e("../lib/scale"),i=n.interopDefault(s);let l=(e=0,t=1024)=>{let r=(0,i.default)(e,0,1,0,.46),n=(0,i.default)(e,0,1,1,.54);return(0,o.generateWave)([{x:r,y:0},{x:n,y:1}],"monotonic",t)},a=(e=0,t=1024)=>{let r=(0,i.default)(e,0,1,.25,.35),n=(0,i.default)(e,0,1,.75,.65);return(0,o.generateWave)([{x:0,y:0},{x:r,y:.25},{x:n,y:.75},{x:1,y:1}],"monotonic",t)},u=(e=0,t=1024)=>{let r=(0,i.default)(e,0,1,0,.25),n=(0,i.default)(e,0,1,.25,.32),s=(0,i.default)(e,0,1,1,.6);return(0,o.generateWave)([{x:r,y:0},{x:n,y:.25},{x:.5,y:.5},{x:s,y:1}],"monotonic",t)},c=[l,a,u]},{"../lib/generateWave":"48KV7","../lib/scale":"9v9Uw","@parcel/transformer-js/src/esmodule-helpers.js":"5zHCx"}],"48KV7":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"generateWave",()=>s);var o=e("splines");let s=(e=[],t="monotonic",r=65536)=>{if(!e.length)return null;let[n,s]=e.reduce(([e,t],{x:n,y:o})=>[[...e,n*r],[...t,o]],[[],[]]),i=new Float32Array(r).fill(0),l=new("monotonic"===t?o.MonotonicCubicSpline:o.CubicSpline)(n,s);for(let e=0;e<Math.ceil(n[0]);e++){let t=s[0];i[e]=t}for(let e=Math.ceil(n[0]);e<Math.ceil(n[n.length-1]);e++){let t=l.interpolate(e);i[e]=t}for(var a=Math.ceil(n[n.length-1]);a<r;a++){let e=s[s.length-1];i[a]=e}return new Float32Array(i.map(e=>{let t=2*e-1;return t>1?1:t<-1?-1:t}))}},{splines:"1fsmV","@parcel/transformer-js/src/esmodule-helpers.js":"5zHCx"}],"1fsmV":[function(e,t,r){var n,o;o=function(){function e(e,t){var r,n,o,s,i,l,a,u,c,f,p,h,d,g,m,x,v;for(i=0,a=e.length,o=[],l=[],r=[],n=[],s=[],u=[],g=a-1;0<=g?i<g:i>g;0<=g?i+=1:i-=1)o[i]=(t[i+1]-t[i])/(e[i+1]-e[i]),i>0&&(l[i]=(o[i-1]+o[i])/2);for(i=0,l[0]=o[0],l[a-1]=o[a-2],c=[],m=a-1;0<=m?i<m:i>m;0<=m?i+=1:i-=1)0===o[i]&&c.push(i);for(f=0,h=c.length;f<h;f++)l[i=c[f]]=l[i+1]=0;for(i=0,x=a-1;0<=x?i<x:i>x;0<=x?i+=1:i-=1)r[i]=l[i]/o[i],n[i]=l[i+1]/o[i],s[i]=Math.pow(r[i],2)+Math.pow(n[i],2),u[i]=3/Math.sqrt(s[i]);for(i=0,c=[],v=a-1;0<=v?i<v:i>v;0<=v?i+=1:i-=1)s[i]>9&&c.push(i);for(p=0,d=c.length;p<d;p++)l[i=c[p]]=u[i]*r[i]*o[i],l[i+1]=u[i]*n[i]*o[i];this.x=e.slice(0,a),this.y=t.slice(0,a),this.m=l}return e.prototype.interpolate=function(e){var t,r,n,o,s,i,l,a,u,c;for(i=c=this.x.length-2;(c<=0?i<=0:i>=0)&&!(this.x[i]<=e);c<=0?i+=1:i-=1);return t=this.x[i+1]-this.x[i],a=Math.pow(l=(e-this.x[i])/t,2),r=2*(u=Math.pow(l,3))-3*a+1,o=u-2*a+l,n=-2*u+3*a,s=u-a,r*this.y[i]+o*t*this.m[i]+n*this.y[i+1]+s*t*this.m[i+1]},e}(),n=function(){function e(e,t,r,n){var o,s,i,l,a,u,c,f,p,h,d,g,m,x;if(null!=e&&null!=t){for(u=0,i=null!=r&&null!=n,p=e.length-1,a=[],g=[],f=[],d=[],m=[],s=[],o=[],l=[],c=[],h=[];0<=p?u<p:u>p;0<=p?u+=1:u-=1)a[u]=e[u+1]-e[u],c[u]=t[u+1]-t[u],h[u]=c[u]/a[u];for(i&&(g[0]=3*(t[1]-t[0])/a[0]-3*r,g[p]=3*n-3*(t[p]-t[p-1])/a[p-1]),u=1;1<=p?u<p:u>p;1<=p?u+=1:u-=1)g[u]=3/a[u]*(t[u+1]-t[u])-3/a[u-1]*(t[u]-t[u-1]);for(i?(f[0]=2*a[0],d[0]=.5,m[0]=g[0]/f[0]):(f[0]=1,d[0]=0,m[0]=0),u=1;1<=p?u<p:u>p;1<=p?u+=1:u-=1)f[u]=2*(e[u+1]-e[u-1])-a[u-1]*d[u-1],d[u]=a[u]/f[u],m[u]=(g[u]-a[u-1]*m[u-1])/f[u];for(i?(f[p]=a[p-1]*(2-d[p-1]),m[p]=(g[p]-a[p-1]*m[p-1])/f[p],s[p]=m[p]):(f[p]=1,m[p]=0,s[p]=0),u=x=p-1;x<=0?u<=0:u>=0;x<=0?u+=1:u-=1)s[u]=m[u]-d[u]*s[u+1],o[u]=(t[u+1]-t[u])/a[u]-a[u]*(s[u+1]+2*s[u])/3,l[u]=(s[u+1]-s[u])/(3*a[u]);this.x=e.slice(0,p+1),this.a=t.slice(0,p),this.b=o,this.c=s.slice(0,p),this.d=l}}return e.prototype.derivative=function(){var e,t,r,n,o,s,i,l,a,u,c;for(o=0,(r=new this.constructor).x=this.x.slice(0,this.x.length),r.a=this.b.slice(0,this.b.length),i=(a=this.c).length;o<i;o++)e=a[o],r.b=2*e;for(s=0,l=(u=this.d).length;s<l;s++)t=u[s],r.c=3*t;for(n=0,c=this.d.length;0<=c?n<c:n>c;0<=c?n+=1:n-=1)r.d=0;return r},e.prototype.interpolate=function(e){var t,r,n;for(r=n=this.x.length-1;(n<=0?r<=0:r>=0)&&!(this.x[r]<=e);n<=0?r+=1:r-=1);return t=e-this.x[r],this.a[r]+this.b[r]*t+this.c[r]*Math.pow(t,2)+this.d[r]*Math.pow(t,3)},e}(),t.exports={CubicSpline:n,MonotonicCubicSpline:o}},{}],"9v9Uw":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=(e,t,r,n,o)=>(Math.max(Math.min(e,r),t)-t)/(r-t)*(o-n)+n},{"@parcel/transformer-js/src/esmodule-helpers.js":"5zHCx"}]},["3qWXy"],"3qWXy","parcelRequirec6d8");
//# sourceMappingURL=worklet.6ab8aee8.js.map
